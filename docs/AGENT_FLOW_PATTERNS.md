# æ™ºèƒ½ä½“æµç¨‹æ¨¡å¼è¯¦è§£

## ğŸ“‹ æ ¸å¿ƒç»“è®º

**æµç¨‹ç±»å‹ï¼ˆPlanAndSolveã€Reflexionã€ReActï¼‰ä¸»è¦å–å†³äºä¸»æ§æ™ºèƒ½ä½“çš„ç±»å‹ã€‚**

---

## ğŸ¯ å½“å‰å®ç°åˆ†æ

### RemoteAgentService ä¸­çš„ä¸»æ§æ™ºèƒ½ä½“

```java
// ç¬¬ 46 è¡Œï¼šåˆ›å»ºä¸»æ§æ™ºèƒ½ä½“
ReActAgent masterAgent = createMasterAgent(llmClient);

// ç¬¬ 93-102 è¡Œï¼šä¸»æ§æ™ºèƒ½ä½“çš„å®šä¹‰
return new ReActAgent(
    "master_agent",
    "ä¸»æ§æ™ºèƒ½ä½“",
    true,
    llmClient,
    Arrays.asList("file_agent", "math_agent"),
    null,
    workflowPrompt,
    10
);
```

**ç»“è®º**: å½“å‰ä½¿ç”¨çš„æ˜¯ **ReActAgent**ï¼Œæ‰€ä»¥æµç¨‹æ¨¡å¼æ˜¯ **ReAct**ã€‚

---

## ğŸ”„ ä¸‰ç§æµç¨‹æ¨¡å¼å¯¹æ¯”

### 1. ReAct æ¨¡å¼ï¼ˆå½“å‰å®ç°ï¼‰

**ç‰¹ç‚¹**: 
- **æ¨ç†-è¡ŒåŠ¨å¾ªç¯** (Reasoning & Acting)
- LLM æ¯è½®åŠ¨æ€å†³ç­–ï¼šè°ƒç”¨å·¥å…· or è¿”å›ç­”æ¡ˆ
- éšå¼æ¨ç†ï¼ŒæŒ‰éœ€æ‰§è¡Œ

**æ‰§è¡Œæµç¨‹**:
```
Round 1: LLM æ€è€ƒ â†’ å†³å®šè°ƒç”¨ file_agent â†’ æ‰§è¡Œ â†’ è§‚å¯Ÿç»“æœ
Round 2: LLM æ€è€ƒ â†’ å†³å®šè°ƒç”¨ math_agent â†’ æ‰§è¡Œ â†’ è§‚å¯Ÿç»“æœ
Round 3: LLM æ€è€ƒ â†’ å†³å®šè¿”å›æœ€ç»ˆç­”æ¡ˆ â†’ ç»“æŸ
```

**é€‚ç”¨åœºæ™¯**:
- âœ… éœ€è¦çµæ´»å†³ç­–çš„ä»»åŠ¡
- âœ… ä¸ç¡®å®šæ­¥éª¤é¡ºåºçš„ä»»åŠ¡
- âœ… éœ€è¦æ ¹æ®ä¸­é—´ç»“æœè°ƒæ•´ç­–ç•¥

---

### 2. PlanAndSolve æ¨¡å¼

**ç‰¹ç‚¹**:
- **è§„åˆ’-æ‰§è¡Œ-è¯„ä¼°** (Plan-Do-Check)
- å…ˆåˆ¶å®šå®Œæ•´è®¡åˆ’ï¼Œå†æŒ‰æ­¥éª¤æ‰§è¡Œ
- æ˜¾å¼è§„åˆ’ï¼Œé¡ºåºæ‰§è¡Œ

**æ‰§è¡Œæµç¨‹**:
```
Step 1: Planner Agent åˆ¶å®šè®¡åˆ’
  â†’ ["æ­¥éª¤1: è°ƒç”¨ file_agent", "æ­¥éª¤2: è°ƒç”¨ math_agent", "æ­¥éª¤3: æ•´åˆç»“æœ"]

Step 2: Executor Agent æŒ‰è®¡åˆ’æ‰§è¡Œ
  â†’ æ‰§è¡Œæ­¥éª¤1 â†’ æ‰§è¡Œæ­¥éª¤2 â†’ æ‰§è¡Œæ­¥éª¤3

Step 3: è¯„ä¼°ç»“æœï¼ˆå¯é€‰ï¼‰
  â†’ å¦‚æœå¤±è´¥ï¼Œé‡æ–°è§„åˆ’
```

**å¦‚ä½•å®ç°**:
```java
// éœ€è¦åˆ›å»º PlanAndSolve ç±»å‹çš„æ™ºèƒ½ä½“ï¼ˆJava ç‰ˆæœ¬æš‚æœªå®ç°ï¼‰
// ç±»ä¼¼ Python ç‰ˆæœ¬ï¼š
// oxy.PlanAndSolve(
//     planner_agent_name="planner_agent",
//     executor_agent_name="executor_agent"
// )
```

**é€‚ç”¨åœºæ™¯**:
- âœ… æ­¥éª¤æ˜ç¡®çš„æµç¨‹åŒ–ä»»åŠ¡
- âœ… éœ€è¦é¢„å…ˆè§„åˆ’çš„åœºæ™¯
- âœ… éœ€è¦ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡

---

### 3. Reflexion æ¨¡å¼

**ç‰¹ç‚¹**:
- **è¿­ä»£æ”¹è¿›** (Iterative Improvement)
- Worker Agent ç”Ÿæˆç­”æ¡ˆ + Reflexion Agent è¯„ä¼°è´¨é‡
- å¦‚æœä¸æ»¡æ„ï¼ŒåŸºäºåé¦ˆæ”¹è¿›

**æ‰§è¡Œæµç¨‹**:
```
Round 1:
  â†’ Worker Agent ç”Ÿæˆç­”æ¡ˆ
  â†’ Reflexion Agent è¯„ä¼°ç­”æ¡ˆè´¨é‡
  â†’ å¦‚æœä¸æ»¡æ„ â†’ åŸºäºåé¦ˆæ”¹è¿›

Round 2:
  â†’ Worker Agent ç”Ÿæˆæ”¹è¿›åçš„ç­”æ¡ˆ
  â†’ Reflexion Agent å†æ¬¡è¯„ä¼°
  â†’ å¦‚æœæ»¡æ„ â†’ è¿”å›æœ€ç»ˆç­”æ¡ˆ
```

**å¦‚ä½•å®ç°**:
```java
// éœ€è¦åˆ›å»º Reflexion ç±»å‹çš„æ™ºèƒ½ä½“ï¼ˆJava ç‰ˆæœ¬æš‚æœªå®ç°ï¼‰
// ç±»ä¼¼ Python ç‰ˆæœ¬ï¼š
// oxy.Reflexion(
//     worker_agent="worker_agent",
//     reflexion_agent="reflexion_agent"
// )
```

**é€‚ç”¨åœºæ™¯**:
- âœ… éœ€è¦é«˜è´¨é‡è¾“å‡ºçš„ä»»åŠ¡
- âœ… éœ€è¦å¤šæ¬¡è¿­ä»£ä¼˜åŒ–çš„åœºæ™¯
- âœ… æœ‰æ˜ç¡®è´¨é‡æ ‡å‡†çš„ä»»åŠ¡

---

## ğŸ“Š æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘

```
ä»»åŠ¡ç‰¹ç‚¹
â”œâ”€â”€ éœ€è¦çµæ´»å†³ç­–ï¼Ÿ
â”‚   â””â”€â”€ YES â†’ ReAct æ¨¡å¼ âœ… (å½“å‰å®ç°)
â”‚
â”œâ”€â”€ æ­¥éª¤æ˜ç¡®ã€éœ€è¦é¢„å…ˆè§„åˆ’ï¼Ÿ
â”‚   â””â”€â”€ YES â†’ PlanAndSolve æ¨¡å¼
â”‚
â””â”€â”€ éœ€è¦é«˜è´¨é‡ã€è¿­ä»£ä¼˜åŒ–ï¼Ÿ
    â””â”€â”€ YES â†’ Reflexion æ¨¡å¼
```

---

## ğŸ”§ å¦‚ä½•åˆ‡æ¢æµç¨‹æ¨¡å¼

### å½“å‰å®ç°ï¼ˆReActï¼‰

```java
// ä¸»æ§æ™ºèƒ½ä½“ä½¿ç”¨ ReActAgent
ReActAgent masterAgent = new ReActAgent(...);
```

### å¦‚æœæ”¹ä¸º PlanAndSolveï¼ˆéœ€è¦å®ç°ï¼‰

```java
// éœ€è¦å…ˆå®ç° PlanAndSolveAgent ç±»
PlanAndSolveAgent masterAgent = new PlanAndSolveAgent(
    "master_agent",
    "planner_agent",  // è§„åˆ’æ™ºèƒ½ä½“
    "executor_agent"  // æ‰§è¡Œæ™ºèƒ½ä½“
);
```

### å¦‚æœæ”¹ä¸º Reflexionï¼ˆéœ€è¦å®ç°ï¼‰

```java
// éœ€è¦å…ˆå®ç° ReflexionAgent ç±»
ReflexionAgent masterAgent = new ReflexionAgent(
    "master_agent",
    "worker_agent",    // å·¥ä½œæ™ºèƒ½ä½“
    "reflexion_agent"  // è¯„ä¼°æ™ºèƒ½ä½“
);
```

---

## âœ… å…³é”®ç†è§£

### 1. ä¸»æ§æ™ºèƒ½ä½“å†³å®šæµç¨‹æ¨¡å¼

- **ä¸»æ§æ™ºèƒ½ä½“ç±»å‹** = **æµç¨‹æ¨¡å¼**
- `ReActAgent` â†’ ReAct æ¨¡å¼
- `PlanAndSolveAgent` â†’ PlanAndSolve æ¨¡å¼
- `ReflexionAgent` â†’ Reflexion æ¨¡å¼

### 2. å­æ™ºèƒ½ä½“å¯ä»¥æ˜¯ä»»æ„ç±»å‹

```java
// å­æ™ºèƒ½ä½“å¯ä»¥æ˜¯ï¼š
ReActAgent fileAgent = ...;      // ReAct æ¨¡å¼
SSEOxyGent mathAgent = ...;      // è¿œç¨‹æ™ºèƒ½ä½“ï¼ˆå†…éƒ¨å¯èƒ½æ˜¯ ReActï¼‰
// å…¶ä»–ç±»å‹çš„æ™ºèƒ½ä½“...

// ä¸»æ§æ™ºèƒ½ä½“ç»Ÿä¸€è°ƒç”¨
masterAgent.subAgents = ["file_agent", "math_agent"]
```

### 3. æµç¨‹æ¨¡å¼æ˜¯æ‰§è¡Œå±‚é¢çš„æ¦‚å¿µ

- **æµç¨‹æ¨¡å¼** å†³å®š**å¦‚ä½•æ‰§è¡Œ**ä»»åŠ¡
- **å­æ™ºèƒ½ä½“** å†³å®š**è°ƒç”¨ä»€ä¹ˆ**å·¥å…·/æ™ºèƒ½ä½“
- ä¸¤è€…æ˜¯ä¸åŒå±‚é¢çš„æ¦‚å¿µ

---

## ğŸ“ æ€»ç»“

**ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼**

1. âœ… **æµç¨‹ç±»å‹ä¸»è¦å–å†³äºä¸»æ§æ™ºèƒ½ä½“**
2. âœ… **å½“å‰å®ç°ä½¿ç”¨ ReActAgentï¼Œæ‰€ä»¥æ˜¯ ReAct æ¨¡å¼**
3. âœ… **å¦‚æœè¦åˆ‡æ¢æ¨¡å¼ï¼Œéœ€è¦æ›´æ”¹ä¸»æ§æ™ºèƒ½ä½“çš„ç±»å‹**

**å½“å‰ RemoteAgentService çš„æµç¨‹æ¨¡å¼**: **ReAct** âœ…

**å¦‚æœè¦å®ç°å…¶ä»–æ¨¡å¼**:
- PlanAndSolve â†’ éœ€è¦å®ç° `PlanAndSolveAgent` ç±»
- Reflexion â†’ éœ€è¦å®ç° `ReflexionAgent` ç±»

---

## ğŸ¯ å»ºè®®

å¦‚æœ Java ç‰ˆæœ¬éœ€è¦æ”¯æŒ PlanAndSolve å’Œ Reflexion æ¨¡å¼ï¼Œå¯ä»¥å‚è€ƒ Python ç‰ˆæœ¬çš„å®ç°ï¼š

1. **PlanAndSolve**: `OxyGent/oxygent/oxy/flows/plan_and_solve.py`
2. **Reflexion**: `OxyGent/oxygent/oxy/flows/reflexion.py`

è¿™äº›éƒ½å±äº `BaseFlow` ç±»å‹ï¼Œæ˜¯æ›´é«˜å±‚çš„æµç¨‹ç¼–æ’å™¨ã€‚

